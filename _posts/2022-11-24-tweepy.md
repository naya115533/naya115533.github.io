---
layout: post
title: Elsastic
feature-img: "assets/img/feature-img/desk-messy.jpeg"
thumbnail: "assets/img/thumbnails/feature-img/desk-messy.jpeg"
tags: [Test, Image]
---

여기는 엘라스틱 블로그입니다

```python

import tweepy
import logging
import logstash

# STEP 2 logging to logstash using UDP communication

# logstash lib for python
#   - Ref. https://github.com/vklochan/python-logstash
# multiline log processing method for logstash
#   - Ref. https://github.com/bitsofinfo/logstash-modsecurity/blob/master/1010_input_file_example.conf
# UDP communication channel input setting for logstash
#   - Ref. https://horae.tistory.com/entry/logstash-with-python



BEARER_TOKEN = "/MY_BEAER_TOKEN/"

class IDPrinter(tweepy.StreamingClient):
    def on_connect(self):
        if self.get_rules().data != None:
            for rule in self.get_rules().data:
                self.delete_rules(rule.id)   
        self.add_rules(tweepy.StreamRule("아이브"))

    def on_tweet(self, tweet):
        tlogger = logging.getLogger('Twitter Crawler')
        if len(tlogger.handlers) ==0:
            tlogger.setLevel(logging.INFO)
            tlogger.addHandler(logstash.LogstashHandler('localhost', 5959, version=1))
        try:
            tlogger.info(tweet.text)
            print(tweet.text)
        except :
            None

    def on_errors(self, errors):
        print(f"Received error code {errors}")
        self.disconnect()
        return False

printer = IDPrinter(BEARER_TOKEN)
# printer.add_rules(tweepy.StreamRule("아이브 lang:ko"))
printer.filter()

```

